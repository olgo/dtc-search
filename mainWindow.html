<!DOCTYPE html>
<html lang="en">
    <head>
        <title>DTC Search</title>
    </head>
    <body>
        <h1>DTC Search</h1>
        <form>
            <div>
                <label>Select DTC List</label>
                <input type="file" id="dtc-file">
            </div>
            <div>
                <label>Enter DTC String</label>
                <input type="text" id="dtc-string" autofocus value="59 72 FB 02 10 01 A3 02 34 01 23 02 3C 01 23">
            </div>
            <button type="submit" id="decode">decode</button>
        </form>
        <br>
        <table width="100%"></table>

        <script>
            let renderer = require('./renderer.js');
            let fs = require('fs');
            
            const electron = require('electron');
            const {ipcRenderer} = electron;

            const form = document.querySelector('form');
            form.addEventListener('submit', submitForm);

            function submitForm (e){
                e.preventDefault();
                
                let dtcFile = document.querySelector('#dtc-file').files[0].path;
                let dtcString = document.querySelector('#dtc-string').value;

                fs.readFile(dtcFile, function (err, data) {
                    if (err) {
                        return console.error(err);
                    }
                    //console.log("doc " + data);
                    let results = renderer.getFaults(data, dtcString);
                    
                });
            }

        </script>
    </body>
</html>